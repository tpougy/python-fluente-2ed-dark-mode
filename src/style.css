/* ==UserStyle==
@name           üêç Python Fluente Dark Mode Configur√°vel
@namespace      github.com/openstyles/stylus
@version        1.0.0
@description    Dark mode para Python Fluente 2a Ed.
@author         tpougy
@preprocessor   stylus

@var checkbox inverter_imagens "Inverter Cores das Imagens (para diagramas)" 1

@var color bg_primary         "Fundo: Principal" #1e1e1e
@var color bg_secondary       "Fundo: Secund√°rio (Tabelas, Sum√°rio)" #2a2a2e
@var color bg_tertiary        "Fundo: Terci√°rio (Cabe√ßalho de Tabela)" #333
@var color bg_ui_element      "Fundo: Elementos de UI (Sidebars)" #262b33
@var color syntax_bg          "Fundo: Blocos de C√≥digo" #282c34

@var color text_primary       "Texto: Principal" #cccccc
@var color text_bright        "Texto: Brilhante (T√≠tulos)" #ffffff
@var color text_muted         "Texto: Suave (Rodap√©)" #888
@var color text_subtle        "Texto: Sutil (Cita√ß√µes)" #a0a0a0
@var color syntax_text        "Texto: Blocos de C√≥digo" #abb2bf

@var color accent_primary     "Acento: Principal (Links, Sele√ß√£o)" #58a6ff
@var color accent_secondary   "Acento: Secund√°rio (Subt√≠tulos)" #ff8975
@var color accent_hover       "Acento: Link Hover" #8cc3ff
@var color accent_visited     "Acento: Link Visitado" #c58af9

@var color border_primary     "Borda: Principal" #444
@var color border_secondary   "Borda: Secund√°ria" #555

@var color highlight_bg       "Destaque: Fundo (tag <mark>)" #d7ba7d
@var color error_bg           "Destaque: Fundo de Erro" #ff444455

@var color scrollbar_thumb    "Scrollbar: Bot√£o" #555
@var color scrollbar_thumb_hover "Scrollbar: Bot√£o Hover" #888

@var color syntax_keyword     "Sintaxe: Palavra-chave" #c678dd
@var color syntax_string      "Sintaxe: String" #98c379
@var color syntax_number      "Sintaxe: N√∫mero" #d19a66
@var color syntax_function    "Sintaxe: Fun√ß√£o/Classe" #61afef
@var color syntax_operator    "Sintaxe: Operador" #56b6c2
@var color syntax_comment     "Sintaxe: Coment√°rio" #7f848e

==/UserStyle== */

@-moz-document domain("pythonfluente.com") {
  /**
     * ===================================================================
     * TEMA DARK MODE v4.0 para PYTHON FLUENTE 2E
     * ===================================================================
     * Refatorado para usar o formul√°rio de configura√ß√£o do Stylus.
     */

  :root {
    /* Paleta de Cores Principal (Ponte entre Stylus e CSS) */
    --bg-primary: bg_primary;
    --bg-secondary: bg_secondary;
    --bg-tertiary: bg_tertiary;
    --bg-ui-element: bg_ui_element;

    --text-primary: text_primary;
    --text-bright: text_bright;
    --text-muted: text_muted;
    --text-subtle: text_subtle;

    --accent-primary: accent_primary;
    --accent-secondary: accent_secondary;
    --accent-hover: accent_hover;
    --accent-visited: accent_visited;

    --border-primary: border_primary;
    --border-secondary: border_secondary;

    --highlight-bg: highlight_bg;
    --error-bg: error_bg;

    --scrollbar-track: bg_secondary;
    --scrollbar-thumb: scrollbar_thumb;
    --scrollbar-thumb-hover: scrollbar_thumb_hover;

    /* Destaque de Sintaxe (Syntax Highlighting) */
    --syntax-bg: syntax_bg;
    --syntax-text: syntax_text;
    --syntax-keyword: syntax_keyword;
    --syntax-string: syntax_string;
    --syntax-number: syntax_number;
    --syntax-function: syntax_function;
    --syntax-operator: syntax_operator;
    --syntax-comment: syntax_comment;
  }

  /* --- [1] GERAL: Fundo, Texto e Sele√ß√£o --- */
  body,
  #header,
  #content,
  div.content,
  div.sect1 {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
  }

  ::selection {
    background-color: var(--accent-primary) !important;
    color: var(--bg-primary) !important;
  }

  /* --- [2] CABE√áALHOS e T√çTULOS --- */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  #toctitle,
  .title,
  caption.title {
    color: var(--text-bright) !important;
    border-bottom-color: var(--border-primary) !important;
  }

  h2,
  h3,
  h4,
  div.title,
  a.link,
  div#toctitle {
    color: var(--accent-secondary) !important;
  }

  /* --- [3] LINKS --- */
  a,
  a:link {
    color: var(--accent-primary) !important;
  }

  a:visited {
    color: var(--accent-visited) !important;
  }

  a:hover,
  a:active {
    color: var(--accent-hover) !important;
    text-decoration: underline !important;
  }

  /* --- [4] TABELAS --- */
  table,
  thead,
  tbody,
  tr,
  td,
  th {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-secondary) !important;
  }
  thead,
  th.tableblock {
    background-color: var(--bg-tertiary) !important;
    color: var(--text-bright) !important;
  }

  /* --- [5] ELEMENTOS ESPEC√çFICOS --- */
  div.sidebarblock,
  div.admonitionblock {
    background-color: var(--bg-ui-element) !important;
    border-color: var(--border-secondary) !important;
  }

  div.sidebarblock .content {
    background-color: transparent !important;
  }

  #toc.toc2 {
    background-color: var(--bg-secondary) !important;
    border: 1px solid var(--border-primary) !important;
  }

  mark {
    background-color: var(--highlight-bg) !important;
    color: var(--bg-primary) !important;
  }

  hr {
    border-color: var(--border-primary) !important;
  }

  div#footer-text {
    color: var(--text-muted) !important;
  }

  div.imageblock .title {
    margin-top: 1em !important;
  }

  /* --- [6] BLOCOS DE C√ìDIGO (SYNTAX HIGHLIGHTING) --- */
  pre,
  code,
  pre.rouge.highlight {
    background-color: var(--syntax-bg) !important;
    color: var(--syntax-text) !important;
    border-radius: 5px;
  }

  pre .k,
  pre .kn,
  pre .kd {
    color: var(--syntax-keyword) !important;
  }
  pre .s,
  pre .s1,
  pre .s2,
  pre .sh,
  pre .sa,
  pre .se,
  pre .dl,
  pre .sb {
    color: var(--syntax-string) !important;
  }
  pre .mi,
  pre .mf,
  pre .mh {
    color: var(--syntax-number) !important;
  }
  pre .nf,
  pre .nc,
  pre .nd,
  pre .nb {
    color: var(--syntax-function) !important;
  }
  pre .o,
  pre .ow,
  pre .bp,
  pre .kc {
    color: var(--syntax-operator) !important;
  }
  pre .c1,
  pre .c {
    color: var(--syntax-comment) !important;
    font-style: italic;
  }
  pre .n,
  pre .nv,
  pre .nl,
  pre .na,
  pre .nt {
    color: var(--syntax-text) !important;
  }
  pre .err {
    background-color: var(--error-bg) !important;
  }

  b.conum {
    color: var(--text-bright) !important;
    border-radius: 50%;
  }

  /* --- [7] BLOCOS DE CITA√á√ÉO (QUOTES) --- */

  /* Regra geral para todo texto dentro de blockquotes e quoteblocks */
  div.quoteblock,
  blockquote,
  div.quoteblock p,
  blockquote p {
    color: var(--text-primary) !important;
  }

  /* Regra espec√≠fica para atribui√ß√µes (cobre os dois padr√µes do site) */
  div.quoteblock .attribution,
  div.quoteblock .attribution cite,
  blockquote p[data-type="attribution"] {
    color: var(--text-subtle) !important;
    font-style: italic;
  }

  /* --- [8] INVERS√ÉO DE IMAGENS (DIAGRAMAS) --- */
  img {
    if inverter_imagens {
      filter: invert(1) !important;
      mix-blend-mode: screen !important;
    }
    else {
      filter: none !important;
      mix-blend-mode: normal !important;
    }
  }

  /* --- [9] BLOCOS DE EXEMPLO --- */
  div.exampleblock .title {
    margin-bottom: 1em !important;
  }
  div.exampleblock .content {
    border-color: var(--border-primary) !important;
    box-shadow: 0 0 2px 1px var(--border-primary) !important;
  }

  /* --- [10] OUTROS --- */
  .author {
    color: var(--text-primary) !important;
  }
  em {
    color: var(--text-primary) !important;
  }

  /* --- [11] BARRA DE ROLAGEM (SCROLLBAR) --- */

  /* Para Chrome, Edge, Safari, etc. */
  #toc.toc2::-webkit-scrollbar {
    width: 12px !important;
  }

  #toc.toc2::-webkit-scrollbar-track {
    background: var(--scrollbar-track) !important;
  }

  #toc.toc2::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-thumb) !important;
    border-radius: 20px !important;
    border: 3px solid var(--scrollbar-track) !important;
  }

  #toc.toc2::-webkit-scrollbar-thumb:hover {
    background-color: var(--scrollbar-thumb-hover) !important;
  }

  /* Para Firefox */
  #toc.toc2 {
    scrollbar-width: thin !important;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track) !important;
  }
}
